<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Bonsai</title>

		<meta charset="utf-8"/>

		<link href="static/common.css" rel="stylesheet" type="text/css"/>
		<link rel="icon" href="static/favicon.png" type="image/png"/>

		<script src="static/underscore.js"></script>
		<script src="static/underscore.string.min.js"></script>
		<script src="static/stats.min.js"></script>
		<script src="static/three.js"></script>
		<script src="static/TrackballControls.js"></script>
		<script src="static/genome.js"></script>
		<script src="static/chunk.js"></script>
		<script src="static/jquery.js"></script>
		<script src="static/bonsai.js"></script>
	</head>
	<body>
		<div class="logo">
			<span class="logo-text">Bonsai</span>
			<!-- <a href="http://www.xanxys.net/bonsai-info">info</a> -->
		</div>

		<div class="column-buttons">
			<button id="button_toggle_time" class="active"
				title="Open/close time control panel.">
				<img src="static/icon_time.png"/>
			</button>
			<button id="button_toggle_chunk"
				title="Open/close chunk statistics panel.">
				<img src="static/icon_chunk.png"/>
			</button>
			<button id="button_toggle_chart"
				title="Open/close energy and population history.">
				<img src="static/icon_chart.png"/>
			</button>

			<hr/>

			<button id="button_toggle_plant"
				title="Open/close plant statistics.">
				<img src="static/icon_plant.png"/>
			</button>
			<button id="button_toggle_genome"
				title="Open/close genome view.">
				<img src="static/icon_genome.png"/>
			</button>

			<hr/>

			<button id="button_toggle_about"
				title="Open/close about.">
				<img src="static/icon_about.png"/>
			</button>
		</div>

		<div class="column-windows">
			<div class="pane-panel bg-time" style="display: block">
				<h1>Time</h1>
				<span id="ui_abs_time">0T</span>
				<button id="button_play">&#x25b6;</button>
				<button id="button_step1">+1T</button>
				<button id="button_step10">+10T</button>
				<button id="button_step50">+50T</button>
			</div>

			<div class="pane-panel bg-chunk">
				<h1>Chunk</h1>
				<pre id="info-chunk"></pre>
			</div>

			<div class="pane-panel bg-chunk debug">
				<h1>Simulation</h1>
				<pre id="info-sim"></pre>
			</div>

			<div class="pane-panel bg-chart">
				<h1>History</h1>
				<div class="figure">
					<canvas width="380" height="120" id="history"></canvas>
				</div>
			</div>

			<div class="pane-panel bg-plant">
				<h1>Plant</h1>
				<pre id="info-plant"></pre>

				<button id="button_kill">Kill</button>
			</div>

			<div class="pane-panel bg-genome">
				<h1>Genome</h1>
				Click a plant to see its genome.
				<div class="figure">
					<pre id="genome-plant">
					</pre>
				</div>
			</div>

			<div class="pane-panel bg-about">
				<h1>About</h1>
				<h2>What's this?</h2>
				<p>
				Bonsai is primarily a plant evolution simulator,
				and partly a tech demo of HTML5.
				</p>
				<p>
				For now, you can just watch plants reproduce (and die).
				You can also click plant to inspect its genome, signals, stats etc.
				Simulated factors are energy, mutation, and in-cell signaling based growth.
				</p>

				<h2>Plant Model</h2>
				<p>
				A plant consists of organ-scale cells, each of them contains
				set of signals. A plant also has a single scalar energy, which is shared among the all cells in the plant.
				</p>

				<h2>Energy Model</h2>
				<p>
				In bonsai, each plant has stored energy which changes over time from several factors. Only way to produce energy is via photosynthesis, and it's simulated by number of rays hitting cells that contains chloroplast. (it also affects shadow)
				</p>

				<p>
				Everything else (including mere existence) costs energy and
				plants with low energy turns blue and eventually dies.
				</p>

				<h2>Cell Model</h2>
				A cell contains signals, which is a string of alphabets. Signals are generated by expression of a gene.

				<p>
				Genome consists of gene, and each gene looks like
				(condition, production). Condition determines a probability of generating the signals in production term, by
				multiplying concentration of each signal.
				</p>

				<p>
				Some signals have special builtin meanings:
				<ul>
					<li><span class="gene">g</span>: growth factor determined by plant age</li>
					<li><span class="gene">iα</span>: 1 - probability of α</li>
					<li><span class="gene">p</span>: multiply 0.5</li>
					<li><span class="gene">dαβ</span>: produce new cell containing signal α in direction β</li>
					<li><span class="gene">rα</span>: delete signal α</li>
					<li><span class="gene">chlr</span>: act as chloroplast</li>
					<li><span class="gene">x</span>,
						<span class="gene">y</span>,
						<span class="gene">z</span>: grow in specified direction</li>
				</ul>


				<h2>Problems...?</h2>
				<p>
				You need a browser with WebGL &amp; Web Worker support.
				Also bonsai is only tested on Chrome/Linux.
				</p>

				<p>
				If something seems wrong, your options are:
				<ol>
					<li>Try using <a href="https://google.com/chrome">Chrome</a></li>
					<li>Raise <a href="https://github.com/xanxys/bonsai/issues">an Issue</a> (or send a pull request fixing it)</li>
					<li>Just give up</li>
				</ol>
				</p>

				<h2>Liked?</h2>
				<a href="https://twitter.com/share" class="twitter-share-button" data-text="Bonsai" data-via="xanxys_" data-count="none">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

			</div>
		</div>

		<div id="main"></div>

		<!-- %%$$ANALYTICS$$%% -->
	</body>
</html>
